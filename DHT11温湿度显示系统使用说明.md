# DHT11温湿度显示系统使用说明

## 项目概述
本项目实现了基于STM32F407的DHT11温湿度传感器数据采集与LCD1602显示系统。

## 功能特性
- **实时温湿度监测**：每2秒读取一次DHT11传感器数据
- **LCD1602显示**：显示温度和湿度值
- **状态指示**：通过LED指示系统工作状态
- **错误处理**：检测并显示传感器读取错误

## 硬件连接

### DHT11传感器连接（PE5）
```
DHT11    →  STM32F407
VCC      →  3.3V
GND      →  GND  
DATA     →  PE5
```

### LCD1602连接
```
LCD1602  →  STM32F407
RS       →  PB7
RW       →  PD6
EN       →  PA4
D0       →  PD7
D1       →  PG15
D2       →  PC6
D3       →  PC7
D4       →  PC8
D5       →  PC9
D6       →  PC11
D7       →  PB6
VCC      →  5V
GND      →  GND
```

### LED连接
- LED0：用于状态指示

## 显示内容

### 正常工作时
```
第一行：Temp: XX C
第二行：Humi: XX %RH
```
- LED0闪烁表示正常工作
- 每2秒更新一次数据

### 初始化阶段
```
第一行：DHT11 Ready!（成功）
第一行：DHT11 Error!（失败）
```

### 读取错误时
```
第一行：Read Error!
第二行：Check DHT11
```
- LED0常亮表示错误

## 代码结构

### 主要文件
- `DHT11.h/DHT11.c`：DHT11传感器驱动
- `lcd.h/lcd.c`：LCD1602显示驱动
- `main.c`：主程序逻辑

### 关键函数
- `dht11_init()` - DHT11初始化
- `dht11_read_data()` - 读取温湿度数据
- `lcd_init()` - LCD初始化
- `lcd_print_str()` - LCD字符串显示

## 技术特点

### 安全的延时函数
- 避免使用SysTick，防止系统冲突
- 基于168MHz系统时钟优化
- 内部静态延时函数，提高代码模块化

### DHT11通信协议
- 单总线通信协议
- 数据格式：湿度整数+湿度小数+温度整数+温度小数+校验和
- 自动校验数据完整性

### 错误处理机制
- 初始化检测
- 读取状态检测
- 校验和验证
- 可视化错误提示

## 使用步骤

1. **硬件连接**：按照连接图连接DHT11和LCD1602
2. **编译下载**：编译并下载程序到STM32F407
3. **观察显示**：LCD会显示初始化状态
4. **正常运行**：系统每2秒更新温湿度数据

## 故障排除

### DHT11初始化失败
- 检查DHT11电源连接
- 检查PE5引脚连接
- 确认DHT11传感器完好

### 显示异常
- 检查LCD1602电源连接
- 检查LCD数据线连接
- 确认对比度调节

### 读取错误频繁
- 检查DHT11数据线连接
- 环境温湿度是否在测量范围内
- 传感器是否损坏

## 测量范围
- **温度**：0-50°C（±2°C精度）
- **湿度**：20-90%RH（±5%RH精度）

## 作者信息
- **作者**：Mika
- **学号**：202205570105
- **日期**：2025-06-30
- **版本**：v1.0

## 注意事项
1. DHT11传感器响应时间较慢，建议读取间隔不少于2秒
2. 确保电源供电稳定，避免数据读取错误
3. 在潮湿环境下使用时注意防护措施
